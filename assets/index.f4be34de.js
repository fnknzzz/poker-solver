import{r as e,R as t,I as n,a as r,b as a,C as i,B as o,c as s}from"./vendor.a2c62c50.js";let l,_=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let c=null;function p(){return null!==c&&c.buffer===l.memory.buffer||(c=new Uint8Array(l.memory.buffer)),c}function u(e,t){return _.decode(p().subarray(e,e+t))}function d(e){if("number"!=typeof e)throw new Error("expected a number argument")}let m=0,w=new TextEncoder("utf-8");const f="function"==typeof w.encodeInto?function(e,t){return w.encodeInto(e,t)}:function(e,t){const n=w.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if("string"!=typeof e)throw new Error("expected a string argument");if(void 0===n){const n=w.encode(e),r=t(n.length);return p().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,a=t(r);const i=p();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;i[a+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),a=n(a,r,r=o+3*e.length);const t=p().subarray(a+o,a+r),i=f(e,t);if(i.read!==e.length)throw new Error("failed to pass whole string");o+=i.written}return m=o,a}let y=null;function h(){return null!==y&&y.buffer===l.memory.buffer||(y=new Int32Array(l.memory.buffer)),y}const b=Object.freeze({First:0,0:"First",Second:1,1:"Second"});class E{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(e){const t=Object.create(E.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();l.__wbg_aiplayer_free(e)}get winner(){if(0==this.ptr)throw new Error("Attempt to use a moved value");return d(this.ptr),l.__wbg_get_aiplayer_winner(this.ptr)>>>0}set winner(e){if(0==this.ptr)throw new Error("Attempt to use a moved value");d(this.ptr),d(e),l.__wbg_set_aiplayer_winner(this.ptr,e)}get end(){if(0==this.ptr)throw new Error("Attempt to use a moved value");return d(this.ptr),0!==l.__wbg_get_aiplayer_end(this.ptr)}set end(e){if(0==this.ptr)throw new Error("Attempt to use a moved value");d(this.ptr),function(e){if("boolean"!=typeof e)throw new Error("expected a boolean argument")}(e),l.__wbg_set_aiplayer_end(this.ptr,e)}static new(e,t){var n=g(e,l.__wbindgen_malloc,l.__wbindgen_realloc),r=m,a=g(t,l.__wbindgen_malloc,l.__wbindgen_realloc),i=m,o=l.aiplayer_new(n,r,a,i);return E.__wrap(o)}ai_play_default(){try{if(0==this.ptr)throw new Error("Attempt to use a moved value");const n=l.__wbindgen_add_to_stack_pointer(-16);d(this.ptr),l.aiplayer_ai_play_default(n,this.ptr);var e=h()[n/4+0],t=h()[n/4+1];return u(e,t)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(e,t)}}play(e){try{if(0==this.ptr)throw new Error("Attempt to use a moved value");const i=l.__wbindgen_add_to_stack_pointer(-16);d(this.ptr);var t=g(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=m;l.aiplayer_play(i,this.ptr,t,n);var r=h()[i/4+0],a=h()[i/4+1];return u(r,a)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(r,a)}}get_ai_remain(){try{if(0==this.ptr)throw new Error("Attempt to use a moved value");const n=l.__wbindgen_add_to_stack_pointer(-16);d(this.ptr),l.aiplayer_get_ai_remain(n,this.ptr);var e=h()[n/4+0],t=h()[n/4+1];return u(e,t)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(e,t)}}get_challenger_remain(){try{if(0==this.ptr)throw new Error("Attempt to use a moved value");const n=l.__wbindgen_add_to_stack_pointer(-16);d(this.ptr),l.aiplayer_get_challenger_remain(n,this.ptr);var e=h()[n/4+0],t=h()[n/4+1];return u(e,t)}finally{l.__wbindgen_add_to_stack_pointer(16),l.__wbindgen_free(e,t)}}}var v="_container_1o5nf_1";!async function e(t){void 0===t&&(t=new URL("/poker-solver/assets/poker-solver_bg.dd3d873c.wasm",location.origin));const n={wbg:{}};n.wbg.__wbindgen_throw=function(e,t){throw new Error(u(e,t))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:r,module:a}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return l=r.exports,e.__wbindgen_wasm_module=a,l}();const x=(r="")=>{const[a,i]=e.exports.useState(r);return[a,t.createElement(n,{value:a,onChange:e=>i(e.target.value)}),i]},A=()=>{const[n,s]=e.exports.useState(null),[l,_]=x("778899JQQQKKK2"),[c,p]=x("TTAA"),[u,d,m]=x(),[w,f]=e.exports.useState("default");return e.exports.useEffect((()=>{""===(null==n?void 0:n.get_ai_remain())&&(r.info("我出完啦！"),setTimeout((()=>{window.location.reload()}),2e3))})),t.createElement("div",{className:v},n?t.createElement(t.Fragment,null,t.createElement(a,{gutter:16,align:"middle",style:{margin:"48px 0 16px"}},t.createElement(i,{span:4},"你出："),t.createElement(i,{span:20},d)),t.createElement(o,{onClick:()=>{f(n.play(u)),m("")},type:"primary"},"出牌"),t.createElement(a,{gutter:16,align:"middle",style:{margin:"16px 0"}},t.createElement(i,{span:4},"人类剩余牌："),t.createElement(i,{span:20},n.get_challenger_remain())),t.createElement(a,{gutter:16,align:"middle",style:{margin:"16px 0"}},t.createElement(i,{span:4},"AI 剩余牌："),t.createElement(i,{span:20},n.get_ai_remain())),"default"===w?null:t.createElement(a,{gutter:16,align:"middle",style:{margin:"16px 0"}},t.createElement(i,{span:4},w?"我":"我："),t.createElement(i,{span:20},w?`出：${w}`:"不出"))):t.createElement(t.Fragment,null,t.createElement(a,{gutter:16,align:"middle",style:{margin:"16px 0"}},t.createElement(i,{span:4},"先手："),t.createElement(i,{span:20},_)),t.createElement(a,{gutter:16,align:"middle",style:{margin:"16px 0"}},t.createElement(i,{span:4},"后手："),t.createElement(i,{span:20},p)),t.createElement(o,{onClick:()=>{const e=performance.now(),t=E.new(l,c),n=performance.now()-e;s(t);const a=t.winner===b.First?"先":"后";r.info(`${a}手胜，我执${a}手，本次计算用了 ${n.toFixed(5)}ms`,2),f(t.ai_play_default())},type:"primary"},"开始")))};s.render(e.exports.createElement(e.exports.StrictMode,null,e.exports.createElement(A,null)),document.getElementById("root"));
